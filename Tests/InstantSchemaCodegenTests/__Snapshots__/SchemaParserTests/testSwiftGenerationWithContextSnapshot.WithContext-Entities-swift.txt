/// ═══════════════════════════════════════════════════════════════════════════════
/// Entities.swift
/// Generated by InstantSchemaCodegen
/// ═══════════════════════════════════════════════════════════════════════════════
///
/// ⚠️  DO NOT EDIT - This file is generated from your InstantDB schema.
/// Any changes will be overwritten on the next codegen run.
///
/// ─────────────────────────────────────────────────────────────────────────────────
/// WHAT THIS FILE IS
/// ─────────────────────────────────────────────────────────────────────────────────
///
/// This file contains Swift structs for each entity in your InstantDB schema.
/// These structs conform to `EntityIdentifiable`, `Codable`, and `Sendable`,
/// making them ready for use with `@Shared` and `@SharedReader`.
/// Each entity has:
/// • An `id` field (auto-generated UUID by default)
/// • All fields from your schema with proper Swift types
/// • Optional link properties (populated when using `.with()` queries)
/// • A memberwise initializer with sensible defaults
///
/// ─────────────────────────────────────────────────────────────────────────────────
/// HOW TO USE
/// ─────────────────────────────────────────────────────────────────────────────────
///
/// Create entities using the generated initializers, then add them to
/// synced collections using `$collection.withLock { }`.
/// • Create: `let item = Todo(...)`
/// • Add: `$items.withLock { $0.append(item) }`
/// • Update: `$items.withLock { $0[index].field = newValue }`
/// • Delete: `$items.withLock { $0.remove(id: item.id) }`
///
/// ─────────────────────────────────────────────────────────────────────────────────
/// QUICK START - Copy & Paste Example
/// ─────────────────────────────────────────────────────────────────────────────────

/* Copy-pasteable example:

import SwiftUI
import SharingInstant
import IdentifiedCollections

struct TodoListContentView: View {
  @Shared(Schema.todos)
  private var items: IdentifiedArrayOf<Todo> = []

  var body: some View {
    List {
      ForEach(items) { item in
        Text("\(item.id)")
      }
    }
  }

  private func addItem() {
    let item = Todo(
      title: "Title value",
      done: false
    )
    $items.withLock { $0.append(item) }
  }

  private func deleteItem(_ item: Todo) {
    $items.withLock { $0.remove(id: item.id) }
  }
}
*/

///
/// ─────────────────────────────────────────────────────────────────────────────────
/// AVAILABLE IN THIS FILE
/// ─────────────────────────────────────────────────────────────────────────────────
///
/// Todo {
///   id: String
///   title: String
///   done: Bool
///   priority: Double?
///   owner: User?  // Link (has: one)
/// }
///
/// User {
///   id: String
///   name: String
///   email: String
///   createdAt: Date
///   todos: [Todo]?  // Link (has: many)
/// }
///

///
/// ─────────────────────────────────────────────────────────────────────────────────
/// GENERATION INFO
/// ─────────────────────────────────────────────────────────────────────────────────
///
/// Generated:       December 18, 2024 at 7:24 PM EST
/// Machine:         test-machine (Apple M1, macOS 14.0)
/// Generator:       Sources/instant-schema/main.swift
/// Source Schema:   Tests/Fixtures/SimpleSchema.ts

/* To regenerate this file, run:

swift run instant-schema generate \
  --from test.schema.ts \
  --to Sources/Generated/
*/

/// ─────────────────────────────────────────────────────────────────────────────────
/// GIT STATE AT GENERATION
/// ─────────────────────────────────────────────────────────────────────────────────
///
/// HEAD Commit:
///   SHA:      abc123def456789012345678901234567890abcd
///   Date:     December 18, 2024 at 7:23 PM EST
///   Author:   Test Author <test@example.com>
///   Message:  test: Add test commit for snapshot testing
///
/// Schema File Last Modified:
///   SHA:      def456abc789012345678901234567890abcdef
///   Date:     December 18, 2024 at 7:21 PM EST
///   Author:   Schema Author <schema@example.com>
///   Message:  feat: Update schema with new entities
///
/// ═══════════════════════════════════════════════════════════════════════════════

import Foundation
import SharingInstant

/// A todo item with title and completion status
public struct Todo: EntityIdentifiable, Codable, Sendable {
  public static var namespace: String { "todos" }
  
  // MARK: - Fields
  
  /// The unique identifier for this entity
  public var id: String
  public var title: String
  public var done: Bool
  public var priority: Double?

  // MARK: - Links
  // Populated when queried with .with(...)

  /// Link to users via 'userTodos'
  /// - Note: Only populated when queried with `.with(\.owner)`
  public var owner: User?


  // MARK: - Initializer

  public init(
    id: String = UUID().uuidString,
    title: String,
    done: Bool,
    priority: Double? = nil,
    owner: User? = nil
  ) {
    self.id = id
    self.title = title
    self.done = done
    self.priority = priority
    self.owner = owner
  }
}


/// A user who can own todos
public struct User: EntityIdentifiable, Codable, Sendable {
  public static var namespace: String { "users" }
  
  // MARK: - Fields
  
  /// The unique identifier for this entity
  public var id: String
  public var name: String
  public var email: String
  public var createdAt: Date

  // MARK: - Links
  // Populated when queried with .with(...)

  /// Link to todos via 'userTodos'
  /// - Note: Only populated when queried with `.with(\.todos)`
  public var todos: [Todo]?


  // MARK: - Initializer

  public init(
    id: String = UUID().uuidString,
    name: String,
    email: String,
    createdAt: Date,
    todos: [Todo]? = nil
  ) {
    self.id = id
    self.name = name
    self.email = email
    self.createdAt = createdAt
    self.todos = todos
  }
}


